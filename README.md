# 西电健康卡（疫情通）/晨午晚检自动提交微信小程序

​	本小程序用于西安电子科技大学健康卡（疫情通）和晨午晚检的自动提交。小程序的理念是在不妨碍疫情防控的前提下，为大部分处于安全区的同学提供便捷的自动提交服务。

## 进程

✅ 基本信息的输入与解析

✅ 信息的提交

✅ 建立数据库

✅ 编写云函数和触发器

❌ 小程序上线

> 小程序将不会上线，如有需求，请自行构建项目使用。

## 数据提交

小程序将会提交如下数据：

健康卡（疫情通）：

+ 学号：你的学号
+ 位置：你选择的位置
+ 所在地点：中国大陆
+ 今日是否在校：否
+ 今日是否在中高风险地区：否
+ 今日体温范围：36.5℃~36.9℃
+ 今日是否出现发热等症状：否
+ 今日是否接触风险人群：否
+ 今日是否接触密接人员：否
+ 今日是否接触境外人员：否
+ 是否有任何与疫情相关的情况：否

晨午晚检：

+ 学号：你的学号
+ 位置：你选择的位置
+ 所在地点：中国大陆
+ 是否在校：是
+ 今日体温范围：36℃~36.5℃
+ 今日西安“一码通”颜色：A 绿色
+ 是否处于隔离期：否
+ 是否出现乏力、干咳、呼吸困难等症状：否

## 截图

<img src="./READMEImgs/screenshot.jpg" alt="index_dark" style="zoom:25%;" />


## 免责声明

​	您应该对使用本程序的结果自行承担风险。开发者不做任何形式的保证：不保证服务结果满足您的要求，不保证提交服务不中断，不保证提交结果的安全性、正确性、及时性、合法性。因网络状况、通讯线路、第三方网站等任何原因而导致您不能正常使用本程序，开发者不承担任何法律责任。

​	程序尊重并保护所有使用此程序用户的个人隐私权，您输入的学号、密码等个人资料，非经您亲自许可或根据相关法律、法规的强制性规定，程序不会主动地泄露给第三方或用于此程序功能以外的服务。

## 构建项目

​	小程序新手？没有问题，在这里构建你的第一个小程序。

​	只要你有一个微信号，一个邮箱，就可以完全免费构建一个微信小程序。小程序完全运行在云端，不需要任何服务器设备。

​	要构建小程序，请按照以下步骤操作：

+ 前往[微信公众平台](https://mp.weixin.qq.com)使用邮箱注册一个小程序。
+ 在[微信公众平台](https://mp.weixin.qq.com)登录刚注册的小程序，前往`开发管理->开发设置`将`AppID(小程序ID)`复制并记录下来。
+ Clone此项目代码，并使用[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)导入，导入时填写自己的`AppID(小程序ID)`，并勾选`微信云开发`。
+ 导入之后，在微信开发者工具左上角点击`云开发`，创建一个云环境。并在云开发控制台数据库页新建名为`data`的空集合。
+ 在云开发控制台数据库页选中集合`data`和`3CheckData`，分别点击数据权限，选中`所有用户可读，仅创建者可读写`。
+ 在微信开发者工具中间资源管理器处，找到`cloudfunctions`文件夹，可以看到里面一共有8个文件夹，分别是八个云函数。
+ 前往[腾讯位置服务](https://lbs.qq.com)，登录并进入控制台，点击`应用管理->我的应用->创建应用`创建一个应用。然后点击`添加key`，启用产品选择微信小程序并填入你的`AppID`，拿到key。
+ 将上一步拿到的`key`填入`XDHealthCard/cloudfunctions/storage/index.js`第24行最后`key=...`，替换掉代码中原有的`key`，并保存。
+ 在每一个云函数的文件夹上面右击，点击`上传并部署：云端安装依赖（不上传node_modules）`，将八个云函数均部署在云端。
+ 在云函数`submitTrigger`的文件夹上面右击，点击`上传触发器`。
+ 在云函数`submit3CTrigger`的文件夹上面右击，点击`上传触发器`。
+ 此时程序已可在虚拟器中运行，点击右上角上传，将程序上传为开发版本。
+ 前往[微信公众平台](https://mp.weixin.qq.com)登录此小程序，前往`版本管理->开发版本`将刚才提交的小程序设置为体验版，并下载体验二维码。
+ 扫描体验二维码就可以在手机端使用此小程序。你也可以将体验二维码分享给最多15人，同意体验申请后即可使用该程序，你可以随时在[微信公众平台](https://mp.weixin.qq.com)的`成员管理`中管理这些体验者。

